(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-574e4c64"],{"0b252":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"m-login text-center"},[1==t.step?o("div",[o("div",{staticClass:"py-4"}),o("div",{staticClass:"logo py-4"},[1==this.$store.state.deployType?o("img",{attrs:{src:e("9d64")}}):t._e(),2==this.$store.state.deployType?o("img",{attrs:{src:e("3ff1")}}):t._e()]),o("transition",{attrs:{name:"slide-fade",appear:""}},[t.show&&1==this.$store.state.deployType?o("h2",{staticClass:"mb-4"},[t._v(t._s(t.$t("LOGIN.WELCOME_REMOTE_ASSIST_1")))]):t._e(),t.show&&2==this.$store.state.deployType?o("h2",{staticClass:"mb-4"},[t._v(t._s(t.$t("LOGIN.WELCOME_REMOTE_ASSIST_2")))]):t._e()]),o("transition",{attrs:{name:"slide-fade"}},[t.show?t._e():o("h2",{staticClass:"mb-4"},[t._v(t._s(t.$t("TERMS.TITLE_1"))),o("br"),t._v("SI管理中心")])]),t.alertMsg?o("div",{staticClass:"alert-msg"},[t._v(t._s(t.alertMsg))]):t._e(),o("transition",{attrs:{name:"slide-fade"}},[t.show?t._e():o("form",{on:{submit:function(a){return a.preventDefault(),t.getCaptcha.apply(null,arguments)}}},[o("div",{staticClass:"ra-form-group my-3 mx-auto text-left"},[o("label",{attrs:{for:"code"}},[t._v(t._s(t.$t("FORM.CODE")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.code,expression:"form.code"}],staticClass:"form-control",attrs:{type:"text",id:"code",placeholder:t.$t("FORM.CODE_PLACEHOLDER"),required:""},domProps:{value:t.form.code},on:{input:function(a){a.target.composing||t.$set(t.form,"code",a.target.value)}}})]),o("div",{staticClass:"ra-form-group my-3 mx-auto text-left"},[o("label",{attrs:{for:"username"}},[t._v(t._s(t.$t("FORM.ACCOUNT")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("FORM.ACCOUNT_PLACEHOLDER"),required:""},domProps:{value:t.form.username},on:{input:function(a){a.target.composing||t.$set(t.form,"username",a.target.value)}}})]),o("div",{staticClass:"ra-form-group my-3 mx-auto text-left"},[o("label",{attrs:{for:"code"}},[t._v(t._s(t.$t("FORM.PW")))]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:t.$t("FORM.PW_PLACEHOLDER"),autocomplete:"off",required:""},domProps:{value:t.form.password},on:{input:function(a){a.target.composing||t.$set(t.form,"password",a.target.value)}}}),o("font-awesome-icon",{staticClass:"eye-position",attrs:{icon:t.pwClass},on:{click:function(a){return t.pwVisibility()}}})],1),t.show?t._e():o("b-button",{staticClass:"ra-confirm-btn",attrs:{type:"submit"}},[t._v(" "+t._s(t.$t("LOGIN.LOGIN"))+" ")]),o("div",{staticClass:"forgot-password text-right mx-auto"},[o("router-link",{attrs:{to:{name:"RAResetPassword"}}},[o("transition",{attrs:{name:"slide-fade",appear:""}},[o("b-button",{staticClass:"text-decoration-none",attrs:{variant:"link"}},[t._v(t._s(t.$t("FORM.FORGOT_PW")))])],1)],1)],1)],1)]),o("transition",{attrs:{name:"slide-fade"}},[t.show?o("b-button",{staticClass:"ra-confirm-btn my-2",on:{click:function(a){t.show=!t.show}}},[t._v(" "+t._s(t.$t("LOGIN.LOGIN"))+" ")]):t._e()],1),o("br"),o("transition",{attrs:{name:"slide-fade"}},[o("router-link",{attrs:{to:{name:"RARegister"}}},[t.show?o("b-button",{staticClass:"ra-confirm-btn-alt my-2"},[t._v(t._s(t.$t("LOGIN.REGISTER")))]):t._e()],1)],1)],1):t._e(),o("transition",{attrs:{name:"slide-fade"}},[2==t.step?o("div",{staticClass:"step-2"},[o("h2",{staticClass:"ra-title b-4"},[t._v(t._s(t.$t("LOGIN.2FA")))]),1==this.$store.state.deployType?o("h3",{staticClass:"ra-sub-title my-2 mx-auto"},[t._v(" "+t._s(t.$t("LOGIN.2FA_DESC_1"))+" ")]):t._e(),2==this.$store.state.deployType?o("h3",{staticClass:"ra-sub-title my-2 mx-auto"},[t._v(" "+t._s(t.$t("LOGIN.2FA_DESC_2"))+" ")]):t._e(),o("form",{on:{submit:function(a){return a.preventDefault(),t.login.apply(null,arguments)}}},[o("div",{staticClass:"ra-form-group mt-4 mb-2 mx-auto text-left"},[o("div",{staticClass:"ra-form-group mt-3 mb-2 mx-auto"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.captcha,expression:"captcha"}],ref:"captcha",staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("FORM.CAPTCHA_PLACEHOLDER"),minlength:"6",maxlength:"6",required:""},domProps:{value:t.captcha},on:{input:function(a){a.target.composing||(t.captcha=a.target.value)}}}),t.submitted&&t.alertMsg&&0!=t.retryCountRemain?o("small",{staticClass:"form-text alert-msg",attrs:{id:"verificationDesc"}},[t._v(" "+t._s(t.$t("FORM.CAPTCHA_ERR_1"))),o("br"),t._v(" "+t._s(t.$t("FORM.CAPTCHA_ERR_2"))+" "+t._s(t.retryCountRemain)+t._s(t.$t("FORM.CAPTCHA_ERR_3"))+" ")]):t._e(),t.submitted&&0==t.retryCountRemain?o("small",{staticClass:"form-text alert-msg",attrs:{id:"verificationDesc"}},[t._v(" "+t._s(t.$t("FORM.CAPTCHA_LIMIT"))+" ")]):t._e()])]),o("b-button",{staticClass:"ra-confirm-btn my-3",attrs:{type:"submit"}},[t._v(t._s(t.$t("GENERAL.CONTINUE")))]),t.countDown&&"en"!=t.lang?o("div",{staticClass:"timer text-center"},[t._v(" "+t._s(t.$t("FORM.CAPTCHA_COUNTDOWN_1"))+" "+t._s(t.countDown)+" "+t._s(t.$t("FORM.CAPTCHA_COUNTDOWN_2"))+" ")]):t._e(),t.countDown&&"en"==t.lang?o("div",{staticClass:"timer text-center"},[t._v(" "+t._s(t.$t("FORM.CAPTCHA_COUNTDOWN_1"))+t._s(t.$t("FORM.CAPTCHA_COUNTDOWN_2"))+" "+t._s(t.countDown)+" ")]):t._e()],1),t.countDown?t._e():o("div",{staticClass:"resend my-3",on:{click:function(a){t.showAlert(),t.getCaptcha()}}},[t._v(" "+t._s(t.$t("FORM.CAPTCHA_RESEND"))+" ")]),o("b-alert",{staticClass:"mx-auto",attrs:{show:t.dismissCountDown,dismissible:"",variant:"dark"},on:{dismissed:function(a){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[o("p",[t._v(t._s(t.$t("FORM.CAPTCHA_RESEND_TIP")))])])],1):t._e()]),1==t.step&&1==this.$store.state.deployType?o("div",{staticClass:"terms"},[o("a",{attrs:{href:"/serviceTerms",target:"_blank"}},[t._v(t._s(t.$t("REGISTER.TERMS")))]),t._v(" - "),o("a",{attrs:{href:"/privacyPolicy",target:"_blank"}},[t._v(t._s(t.$t("REGISTER.POLICY")))])]):t._e(),1==t.step&&2==this.$store.state.deployType?o("div",{staticClass:"terms"},[o("a",{attrs:{href:"https://market.digiwincloud.com/assets/legal/index-tw.html",target:"_blank"}},[t._v(t._s(t.$t("REGISTER.TERMS")))]),t._v(" - "),o("a",{attrs:{href:"https://www.digiwin.com/tw/legal.html",target:"_blank"}},[t._v(t._s(t.$t("REGISTER.POLICY")))])]):t._e(),o("b-modal",{attrs:{id:"verificationModal","ok-only":"","ok-title":t.$t("GENERAL.CONTINUE"),"hide-header-close":"",centered:""}},[o("div",{staticClass:"success-check-modal text-center"},[o("p",{staticClass:"ra-title y-4"},[t._v(t._s(t.$t("LOGIN.NOT_LOGGED_IN")))]),o("p",{staticClass:"ra-sub-title my-4"},[t._v(t._s(t.$t("LOGIN.NOT_LOGGED_IN_DESC")))])])]),o("b-modal",{attrs:{id:"notPermittedModal","ok-only":"","ok-title":t.$t("GENERAL.CONTINUE"),"hide-header-close":"",centered:""}},[o("div",{staticClass:"success-check-modal text-center"},[o("p",{staticClass:"ra-title y-4"},[t._v(t._s(t.$t("LOGIN.NOT_PERMITTED")))])])])],1)},s=[],i=(e("d3b7"),e("25f0"),e("99af"),e("fb6a"),e("5fb0")),r=e("a2e0"),n={mixins:[r["a"]],name:"Login",props:{requiresAuth:Boolean,isNotPermitted:Boolean},data:function(){return{step:1,pwClass:"eye",show:!0,form:{code:"",username:"",password:""},dismissSecs:3,dismissCountDown:0,alertMsg:"",submitted:!1,captcha:null,valid_until:null,timer:null,countDown:null,retryCountRemain:null,lang:null}},mounted:function(){var t=this,a=this.$cookies.get("token");this.lang=parseInt(this.$cookies.get("language"))||i["a"].Lang.CHINESE,a?this.$router.push({name:"SIMaintenance"}):(this.requiresAuth&&(this.$bvModal.show("verificationModal"),setTimeout((function(){t.$bvModal.hide("verificationModal")}),3e3)),this.isNotPermitted&&(this.$bvModal.show("notPermittedModal"),setTimeout((function(){t.$bvModal.hide("notPermittedModal")}),3e3)))},methods:{getCaptcha:function(){var t=this,a={account:this.form.username,password:this.CryptoJS.MD5(this.form.password).toString(),type:3,lang:parseInt(this.$cookies.get("language"))||i["a"].Lang.CHINESE,code:this.form.code};this.apiPost("captcha/login",a,{noShowError:!0}).then((function(a){var e=a.data;t.valid_until=e.valid_until,t.setTimer(),t.step=2,t.submitted=!1,t.$nextTick((function(){console.log(t.$refs),t.$refs.captcha.focus()}))})).catch((function(e){var o=e.code,s=e.message;console.log("code=".concat(o,", message=").concat(s)),-1013==o?(t.valid_until=a.valid_until,t.setTimer(),t.step=2,t.submitted=!1,t.$nextTick((function(){console.log(t.$refs),t.$refs.captcha.focus()}))):-1011==o?(t.valid_until=a.valid_until,t.setTimer(),t.submitted=!1):t.alertMsg=s}))},login:function(){var t=this;this.submitted=!0;var a={code:this.form.code,account:this.form.username,password:this.CryptoJS.MD5(this.form.password).toString(),captcha:this.captcha,device_id:this.$cookies.get("fcm_token"),fcm_token:this.$cookies.get("fcm_token")};this.apiPost("auth/login_si",a,{noShowError:!0}).then((function(a){var e=a.data;t.$cookies.set("token",e.token),t.$cookies.set("user",e.userinfo),console.log("si登入成功"),t.$router.push({name:"SIMaintenance"})})).catch((function(a){var e=a.message,o=a.data;t.alertMsg=e,o&&(t.retryCountRemain=o.retry_count_remain)}))},pwVisibility:function(){var t=document.getElementById("password");"password"===t.type?(t.type="text",this.pwClass="eye-slash"):(t.type="password",this.pwClass="eye")},setTimer:function(){this.timer&&clearInterval(this.timer);var t=this;this.timer=setInterval((function(){var a=Math.floor((new Date(t.valid_until+" UTC")-new Date)/1e3);a<=0?(clearInterval(t.timer),t.countDown=null):t.countDown=("0"+Math.floor(a/60)).slice(-2)+":"+("0"+Math.floor(a%60)).slice(-2)}),1e3)},showAlert:function(){this.dismissCountDown=this.dismissSecs},countDownChanged:function(t){this.dismissCountDown=t}}},l=n,d=(e("dbfa"),e("2877")),c=Object(d["a"])(l,o,s,!1,null,"06539fad",null);a["default"]=c.exports},"3ff1":function(t,a,e){t.exports=e.p+"img/logo-digiwin.99b4e8ad.png"},4235:function(t,a,e){var o=e("c3ae");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var s=e("499e").default;s("18b1098d",o,!0,{sourceMap:!1,shadowMode:!1})},9855:function(t,a,e){t.exports=e.p+"img/background.3d7303a8.png"},"9d64":function(t,a,e){t.exports=e.p+"img/logo.30a8e459.png"},c3ae:function(t,a,e){var o=e("24fb"),s=e("1de5"),i=e("9855");a=o(!1);var r=s(i);a.push([t.i,".blue[data-v-06539fad]{color:#2173c9}.blueHover[data-v-06539fad]{color:#185597}.darkBlue[data-v-06539fad]{color:#0a519c}.grey[data-v-06539fad]{color:#7b7b7b}.greyHover[data-v-06539fad]{color:#606060}.lightgrey[data-v-06539fad]{color:#d7d7d7}.green[data-v-06539fad]{color:#3fb182}.greenHover[data-v-06539fad]{color:#37926c}.red[data-v-06539fad]{color:#d44e4e}.redHover[data-v-06539fad]{color:#b44b4b}.placeholder[data-v-06539fad]{color:#aeaeae}.placeholderHover[data-v-06539fad]{color:#7b7b7b}.white[data-v-06539fad]{color:#fff}.custom-pagination[data-v-06539fad]{width:calc(100% - 60px)}.custom-pagination[data-v-06539fad] .pagination{float:right}.custom-pagination[data-v-06539fad] .VuePagination__pagination-item-next-chunk .page-link,.custom-pagination[data-v-06539fad] .VuePagination__pagination-item-prev-chunk .page-link{padding:7px}.custom-pagination[data-v-06539fad] .page-link{width:38px;height:38px;border-radius:19px;margin:0 2px;text-align:center;color:#2173c9;cursor:pointer}.custom-pagination[data-v-06539fad] .page-link.active{color:#fff;background-color:#2173c9;border-color:#2173c9}.m-login[data-v-06539fad]{background-image:url("+r+");height:100vh}.m-login .ra-form-group[data-v-06539fad]{position:relative}.m-login .ra-form-group .eye-position[data-v-06539fad]{position:absolute;right:15px;margin-top:-33px;cursor:pointer}.m-login .forgot-password[data-v-06539fad]{width:300px}.m-login .forgot-password button[data-v-06539fad]{font-size:16px;color:#aeaeae}.m-login .forgot-password button[data-v-06539fad]:hover{color:#7b7b7b}.m-login .step-2[data-v-06539fad]{padding-top:300px}.m-login .step-2 .resend[data-v-06539fad]{color:#2173c9;cursor:pointer}.m-login .step-2 .resend[data-v-06539fad]:hover{color:#185597}.m-login .step-2 .alert[data-v-06539fad]{width:440px;height:50px;margin-top:150px;border-radius:25px;color:#fff;background-color:#4c4c4c}.m-login .terms[data-v-06539fad]{position:fixed;bottom:60px;width:100%;font-size:12px;z-index:99}.m-login .terms a[data-v-06539fad]{color:#aeaeae}.m-login .terms a[data-v-06539fad]:hover{color:#7b7b7b}.m-login .fii-logo[data-v-06539fad]{position:fixed;bottom:20px;width:100%;padding-right:20px}.m-login .fii-logo img[data-v-06539fad]{width:100px}.m-login[data-v-06539fad] .modal{background-color:#ccc}",""]),t.exports=a},dbfa:function(t,a,e){"use strict";e("4235")}}]);
//# sourceMappingURL=chunk-574e4c64.05baf3de.js.map